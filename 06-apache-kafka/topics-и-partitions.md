# üìö Topics –∏ Partitions

> –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ Kafka.

---

## üìã Topic ‚Äî –∫–∞—Ç–µ–≥–æ—Ä–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π

**–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ:** –õ–æ–≥–∏—á–µ—Å–∫–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è –¥–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π.

**–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:**
- –ò–º–µ–Ω–æ–≤–∞–Ω–Ω–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π
- –ú–æ–∂–µ—Ç –∏–º–µ—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–∞—Ä—Ç–∏—Ü–∏–π
- –ù–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ–¥—é—Å–µ—Ä–æ–≤ –º–æ–≥—É—Ç –ø–∏—Å–∞—Ç—å –≤ –æ–¥–∏–Ω —Ç–æ–ø–∏–∫
- –ù–µ—Å–∫–æ–ª—å–∫–æ –∫–æ–Ω—Å—å—é–º–µ—Ä–æ–≤ –º–æ–≥—É—Ç —á–∏—Ç–∞—Ç—å –∏–∑ –æ–¥–Ω–æ–≥–æ —Ç–æ–ø–∏–∫–∞

**–ü—Ä–∏–º–µ—Ä—ã —Ç–æ–ø–∏–∫–æ–≤:**
```
orders.created
orders.updated
payments.completed
user.registered
notifications.email
```

**–ò–º–µ–Ω–æ–≤–∞–Ω–∏–µ:**
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ—á–∫–∏ –¥–ª—è —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è —É—Ä–æ–≤–Ω–µ–π
- –û–ø–∏—Å—ã–≤–∞–π—Ç–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ —Ç–æ–ø–∏–∫–∞
- –°–ª–µ–¥—É–π—Ç–µ —Å–æ–≥–ª–∞—à–µ–Ω–∏—è–º –∫–æ–º–∞–Ω–¥—ã

---

## üîÄ Partition ‚Äî —Ñ–∏–∑–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Ç–æ–ø–∏–∫–∞

**–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ:** –§–∏–∑–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Ç–æ–ø–∏–∫–∞ –¥–ª—è –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º–∞.

**–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:**
- –¢–æ–ø–∏–∫ —Ä–∞–∑–¥–µ–ª–µ–Ω –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–∞—Ä—Ç–∏—Ü–∏–π
- –ö–∞–∂–¥–∞—è –ø–∞—Ä—Ç–∏—Ü–∏—è —Ö—Ä–∞–Ω–∏—Ç—Å—è –Ω–∞ —Ä–∞–∑–Ω—ã—Ö –±—Ä–æ–∫–µ—Ä–∞—Ö
- –°–æ–æ–±—â–µ–Ω–∏—è –≤ –ø–∞—Ä—Ç–∏—Ü–∏–∏ —É–ø–æ—Ä—è–¥–æ—á–µ–Ω—ã
- –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —á–µ—Ä–µ–∑ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–∞—Ä—Ç–∏—Ü–∏–π

**–ü—Ä–∏–º–µ—Ä:**
```
Topic: orders.created (3 –ø–∞—Ä—Ç–∏—Ü–∏–∏)

Partition 0: [msg1, msg4, msg7, ...]
Partition 1: [msg2, msg5, msg8, ...]
Partition 2: [msg3, msg6, msg9, ...]
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ü–æ—Ä—è–¥–æ–∫ —Å–æ–æ–±—â–µ–Ω–∏–π –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω —Ç–æ–ª—å–∫–æ –≤ —Ä–∞–º–∫–∞—Ö –ø–∞—Ä—Ç–∏—Ü–∏–∏
- –ú–µ–∂–¥—É –ø–∞—Ä—Ç–∏—Ü–∏—è–º–∏ –ø–æ—Ä—è–¥–æ–∫ –Ω–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞—Ä—Ç–∏—Ü–∏–π –∑–∞–¥–∞–µ—Ç—Å—è –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Ç–æ–ø–∏–∫–∞

---

## üéØ –ó–∞—á–µ–º –ø–∞—Ä—Ç–∏—Ü–∏–∏:

### 1. –ü–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º

**–ú–µ—Ö–∞–Ω–∏–∑–º:**
- –†–∞–∑–Ω—ã–µ –∫–æ–Ω—Å—å—é–º–µ—Ä—ã —á–∏—Ç–∞—é—Ç —Ä–∞–∑–Ω—ã–µ –ø–∞—Ä—Ç–∏—Ü–∏–∏
- –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
- –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π

**–ü—Ä–∏–º–µ—Ä:**
```
Consumer Group: order-processors
‚îú‚îÄ‚îÄ Consumer 1 ‚Üí —á–∏—Ç–∞–µ—Ç Partition 0
‚îú‚îÄ‚îÄ Consumer 2 ‚Üí —á–∏—Ç–∞–µ—Ç Partition 1
‚îî‚îÄ‚îÄ Consumer 3 ‚Üí —á–∏—Ç–∞–µ—Ç Partition 2

–†–µ–∑—É–ª—å—Ç–∞—Ç: 3x —Å–∫–æ—Ä–æ—Å—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫–∏
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ë—ã—Å—Ç—Ä–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤
- –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Å—å—é–º–µ—Ä–æ–≤
- –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏

---

### 2. –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

**–ú–µ—Ö–∞–Ω–∏–∑–º:**
- –ü–∞—Ä—Ç–∏—Ü–∏–∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –ø–æ –±—Ä–æ–∫–µ—Ä–∞–º
- –ë–æ–ª—å—à–µ –ø–∞—Ä—Ç–∏—Ü–∏–π = –±–æ–ª—å—à–µ –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º–∞
- –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å –±—Ä–æ–∫–µ—Ä—ã –∏ –ø–∞—Ä—Ç–∏—Ü–∏–∏

**–ü—Ä–∏–º–µ—Ä:**
```
–ù–∞—á–∞–ª–æ: Topic —Å 3 –ø–∞—Ä—Ç–∏—Ü–∏—è–º–∏ –Ω–∞ 3 –±—Ä–æ–∫–µ—Ä–∞—Ö
–†–æ—Å—Ç –Ω–∞–≥—Ä—É–∑–∫–∏: –£–≤–µ–ª–∏—á–∏—Ç—å –¥–æ 6 –ø–∞—Ä—Ç–∏—Ü–∏–π
–†–µ–∑—É–ª—å—Ç–∞—Ç: –£–¥–≤–æ–µ–Ω–Ω–∞—è –ø—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ
- –õ–∏–Ω–µ–π–Ω—ã–π —Ä–æ—Å—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –ì–∏–±–∫–æ—Å—Ç—å –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ

---

### 3. –£–ø–æ—Ä—è–¥–æ—á–µ–Ω–Ω–æ—Å—Ç—å

**–ú–µ—Ö–∞–Ω–∏–∑–º:**
- –°–æ–æ–±—â–µ–Ω–∏—è –≤ –ø–∞—Ä—Ç–∏—Ü–∏–∏ —É–ø–æ—Ä—è–¥–æ—á–µ–Ω—ã
- –ú–µ–∂–¥—É –ø–∞—Ä—Ç–∏—Ü–∏—è–º–∏ –ø–æ—Ä—è–¥–æ–∫ –Ω–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω
- –ö–ª—é—á —Å–æ–æ–±—â–µ–Ω–∏—è –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø–∞—Ä—Ç–∏—Ü–∏—é

**–ü—Ä–∏–º–µ—Ä:**
```
Partition 0: [msg1, msg2, msg3] ‚Üê —É–ø–æ—Ä—è–¥–æ—á–µ–Ω—ã
Partition 1: [msg4, msg5, msg6] ‚Üê —É–ø–æ—Ä—è–¥–æ—á–µ–Ω—ã
–ù–æ msg3 –º–æ–∂–µ—Ç –ø—Ä–∏–π—Ç–∏ —Ä–∞–Ω—å—à–µ msg4!
```

**–ö–æ–≥–¥–∞ –≤–∞–∂–Ω–æ:**
- –°–æ–æ–±—â–µ–Ω–∏—è –æ–¥–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —É–ø–æ—Ä—è–¥–æ—á–µ–Ω—ã
- –°–æ–±—ã—Ç–∏—è –æ–¥–Ω–æ–≥–æ –∑–∞–∫–∞–∑–∞ –¥–æ–ª–∂–Ω—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å—Å—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–ª—é—á —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è –≥–∞—Ä–∞–Ω—Ç–∏–∏ –ø–æ—Ä—è–¥–∫–∞

---

## üîë –ö–ª—é—á —Å–æ–æ–±—â–µ–Ω–∏—è (Message Key)

**–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ:** –ö–ª—é—á, –æ–ø—Ä–µ–¥–µ–ª—è—é—â–∏–π –ø–∞—Ä—Ç–∏—Ü–∏—é –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏—è.

**–ú–µ—Ö–∞–Ω–∏–∑–º:**
- Producer –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç: `{key: "user_123", value: "order data"}`
- –°–æ–æ–±—â–µ–Ω–∏—è —Å –æ–¥–Ω–∏–º –∫–ª—é—á–æ–º ‚Üí –æ–¥–Ω–∞ –ø–∞—Ä—Ç–∏—Ü–∏—è
- –ì–∞—Ä–∞–Ω—Ç–∏—è –ø–æ—Ä—è–¥–∫–∞ –¥–ª—è –æ–¥–Ω–æ–≥–æ –∫–ª—é—á–∞
- –ë–µ–∑ –∫–ª—é—á–∞ ‚Üí round-robin –ø–æ –ø–∞—Ä—Ç–∏—Ü–∏—è–º

**–ü—Ä–∏–º–µ—Ä:**
```
key: "user_123" ‚Üí –≤—Å–µ–≥–¥–∞ Partition 0
key: "user_456" ‚Üí –≤—Å–µ–≥–¥–∞ Partition 1
key: "user_789" ‚Üí –≤—Å–µ–≥–¥–∞ Partition 2
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
- –ì–∞—Ä–∞–Ω—Ç–∏—è –ø–æ—Ä—è–¥–∫–∞ –¥–ª—è —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ —Å—É—â–Ω–æ—Å—Ç–∏
- –û–±–µ—Å–ø–µ—á–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏

**–ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞:**
```javascript
// –í—Å–µ –∑–∞–∫–∞–∑—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 123 –ø–æ–ø–∞–¥—É—Ç –≤ –æ–¥–Ω—É –ø–∞—Ä—Ç–∏—Ü–∏—é
producer.send({
  topic: 'orders',
  messages: [{
    key: 'user_123',  // –ö–ª—é—á –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø–∞—Ä—Ç–∏—Ü–∏—é
    value: JSON.stringify({
      orderId: 456,
      userId: 123,
      amount: 100.00
    })
  }]
});
```

---

## üìç Offset ‚Äî –ø–æ–∑–∏—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –ø–∞—Ä—Ç–∏—Ü–∏–∏

**–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ:** –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø–æ–∑–∏—Ü–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –ø–∞—Ä—Ç–∏—Ü–∏–∏.

**–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:**
- –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π –Ω–æ–º–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –ø–∞—Ä—Ç–∏—Ü–∏–∏
- –ù–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å 0
- –£–Ω–∏–∫–∞–ª–µ–Ω –≤ —Ä–∞–º–∫–∞—Ö –ø–∞—Ä—Ç–∏—Ü–∏–∏
- –ö–æ–Ω—Å—å—é–º–µ—Ä –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç —Å–≤–æ–π offset

**–ü—Ä–∏–º–µ—Ä:**
```
Partition 0:
offset 0: msg1
offset 1: msg2
offset 2: msg3
offset 3: msg4
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
- –ö–æ–Ω—Å—å—é–º–µ—Ä —á–∏—Ç–∞–µ—Ç —Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ offset
- –ú–æ–∂–Ω–æ –ø–µ—Ä–µ—á–∏—Ç–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è —Å –Ω—É–∂–Ω–æ–≥–æ offset
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ —á—Ç–µ–Ω–∏—è

**–ü—Ä–∏–º–µ—Ä —á—Ç–µ–Ω–∏—è:**
```
Consumer —á–∏—Ç–∞–µ—Ç —Å offset 2 ‚Üí –ø–æ–ª—É—á–∏—Ç msg3, msg4, ...
```

**–í–∞—Ä–∏–∞–Ω—Ç—ã —á—Ç–µ–Ω–∏—è:**
- **earliest** ‚Äî —Å —Å–∞–º–æ–≥–æ –Ω–∞—á–∞–ª–∞ (offset 0)
- **latest** ‚Äî —Å –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
- **specific offset** ‚Äî —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ offset

---

## üîÑ Replication (–†–µ–ø–ª–∏–∫–∞—Ü–∏—è)

**–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ:** –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä—Ç–∏—Ü–∏–π –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –±—Ä–æ–∫–µ—Ä–æ–≤ –¥–ª—è –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏.

**Replication Factor:**
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–ø–∏–π –ø–∞—Ä—Ç–∏—Ü–∏–∏
- –û–±—ã—á–Ω–æ 3 (1 leader + 2 replicas)
- –ó–∞—â–∏—Ç–∞ –æ—Ç –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏:**
```
Replication Factor = 3

Partition 0:
‚îú‚îÄ‚îÄ Leader (Broker 1) ‚Äî –æ—Å–Ω–æ–≤–Ω–∞—è –∫–æ–ø–∏—è
‚îú‚îÄ‚îÄ Replica (Broker 2) ‚Äî —Ä–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è
‚îî‚îÄ‚îÄ Replica (Broker 3) ‚Äî —Ä–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è
```

**–†–æ–ª–∏:**
- **Leader** ‚Äî –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã —á—Ç–µ–Ω–∏—è/–∑–∞–ø–∏—Å–∏
- **Replica** ‚Äî —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è —Å leader, –≥–æ—Ç–æ–≤–∞ —Å—Ç–∞—Ç—å leader

**Failover:**
```
–ï—Å–ª–∏ Broker 1 —É–ø–∞–ª ‚Üí Broker 2 —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è Leader
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –û—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å
- –í—ã—Å–æ–∫–∞—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å
- –ó–∞—â–∏—Ç–∞ –æ—Ç –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö

---

## üí° –ö–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã

> **üìå –ó–∞–ø–æ–º–Ω–∏—Ç–µ:**

- **Topic - –∫–∞—Ç–µ–≥–æ—Ä–∏—è, Partition - —Ñ–∏–∑–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ** ‚Äî —Ç–æ–ø–∏–∫ –ª–æ–≥–∏—á–µ—Å–∫–∏–π, –ø–∞—Ä—Ç–∏—Ü–∏—è —Ñ–∏–∑–∏—á–µ—Å–∫–∞—è
- **–ö–ª—é—á —Å–æ–æ–±—â–µ–Ω–∏—è –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø–∞—Ä—Ç–∏—Ü–∏—é** ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–ª—é—á –¥–ª—è –≥–∞—Ä–∞–Ω—Ç–∏–∏ –ø–æ—Ä—è–¥–∫–∞
- **Offset - –ø–æ–∑–∏—Ü–∏—è –≤ –ø–∞—Ä—Ç–∏—Ü–∏–∏** ‚Äî —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Å–æ–æ–±—â–µ–Ω–∏—è
- **Replication - –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å** ‚Äî –∫–æ–ø–∏–∏ –ø–∞—Ä—Ç–∏—Ü–∏–π –Ω–∞ —Ä–∞–∑–Ω—ã—Ö –±—Ä–æ–∫–µ—Ä–∞—Ö

---

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ Topic –∏ Partition:

| –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ | Topic | Partition |
|----------------|-------|-----------|
| **–¢–∏–ø** | –õ–æ–≥–∏—á–µ—Å–∫–∏–π | –§–∏–∑–∏—á–µ—Å–∫–∏–π |
| **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ** | –ö–∞—Ç–µ–≥–æ—Ä–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π | –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –¥–ª—è –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º–∞ |
| **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ** | –ú–Ω–æ–≥–æ —Ç–æ–ø–∏–∫–æ–≤ | –ù–µ—Å–∫–æ–ª—å–∫–æ –ø–∞—Ä—Ç–∏—Ü–∏–π –≤ —Ç–æ–ø–∏–∫–µ |
| **–ü–æ—Ä—è–¥–æ–∫** | –ù–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω | –ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω –≤ —Ä–∞–º–∫–∞—Ö –ø–∞—Ä—Ç–∏—Ü–∏–∏ |
| **–•—Ä–∞–Ω–µ–Ω–∏–µ** | –ù–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –±—Ä–æ–∫–µ—Ä–∞—Ö | –ù–∞ –æ–¥–Ω–æ–º –±—Ä–æ–∫–µ—Ä–µ (—Å —Ä–µ–ø–ª–∏–∫–∞–º–∏) |

---

## üéØ Best Practices:

### ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:

1. **–í—ã–±–∏—Ä–∞–π—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞—Ä—Ç–∏—Ü–∏–π**
   - –°–ª–∏—à–∫–æ–º –º–∞–ª–æ ‚Üí –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º–∞
   - –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ ‚Üí overhead –Ω–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
   - –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –∫—Ä–∞—Ç–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –±—Ä–æ–∫–µ—Ä–æ–≤

2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–ª—é—á–∏ —Å–æ–æ–±—â–µ–Ω–∏–π**
   - –î–ª—è –≥–∞—Ä–∞–Ω—Ç–∏–∏ –ø–æ—Ä—è–¥–∫–∞ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
   - –î–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ –ø–æ —Å—É—â–Ω–æ—Å—Ç–∏
   - –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–ª—é—á, –µ—Å–ª–∏ –ø–æ—Ä—è–¥–æ–∫ –Ω–µ –≤–∞–∂–µ–Ω

3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—é**
   - –ú–∏–Ω–∏–º—É–º 3 —Ä–µ–ø–ª–∏–∫–∏ –¥–ª—è production
   - –ó–∞—â–∏—Ç–∞ –æ—Ç –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö
   - –í—ã—Å–æ–∫–∞—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å

4. **–ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ offset lag**
   - –û—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ –æ—Ç—Å—Ç–∞–≤–∞–Ω–∏–µ –∫–æ–Ω—Å—å—é–º–µ—Ä–æ–≤
   - –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ –ø—Ä–æ–±–ª–µ–º–∞—Ö –æ–±—Ä–∞–±–æ—Ç–∫–∏
   - –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

---

## üìã –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:

### –ü—Ä–∏–º–µ—Ä 1: –¢–æ–ø–∏–∫ —Å –ø–∞—Ä—Ç–∏—Ü–∏—è–º–∏

**–°–æ–∑–¥–∞–Ω–∏–µ —Ç–æ–ø–∏–∫–∞:**
```bash
kafka-topics --create \
  --topic orders \
  --partitions 3 \
  --replication-factor 3 \
  --bootstrap-server localhost:9092
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –¢–æ–ø–∏–∫ `orders` —Å–æ–∑–¥–∞–Ω
- 3 –ø–∞—Ä—Ç–∏—Ü–∏–∏ (0, 1, 2)
- –ö–∞–∂–¥–∞—è –ø–∞—Ä—Ç–∏—Ü–∏—è —Ä–µ–ø–ª–∏—Ü–∏—Ä–æ–≤–∞–Ω–∞ –Ω–∞ 3 –±—Ä–æ–∫–µ—Ä–∞

---

### –ü—Ä–∏–º–µ—Ä 2: –û—Ç–ø—Ä–∞–≤–∫–∞ —Å –∫–ª—é—á–æ–º

**–ö–æ–¥ –ø—Ä–æ–¥—é—Å–µ—Ä–∞:**
```javascript
// –í—Å–µ –∑–∞–∫–∞–∑—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ–ø–∞–¥—É—Ç –≤ –æ–¥–Ω—É –ø–∞—Ä—Ç–∏—Ü–∏—é
producer.send({
  topic: 'orders',
  messages: [{
    key: `user_${userId}`,  // –ö–ª—é—á = user_123
    value: JSON.stringify(orderData)
  }]
});
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ó–∞–∫–∞–∑—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 123 ‚Üí –æ–¥–Ω–∞ –ø–∞—Ä—Ç–∏—Ü–∏—è
- –ü–æ—Ä—è–¥–æ–∫ –∑–∞–∫–∞–∑–æ–≤ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω
- –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞

---

### –ü—Ä–∏–º–µ—Ä 3: –ß—Ç–µ–Ω–∏–µ —Å offset

**–ö–æ–¥ –∫–æ–Ω—Å—å—é–º–µ—Ä–∞:**
```javascript
consumer.subscribe({ topics: ['orders'] });

// –ß–∏—Ç–∞—Ç—å —Å –Ω–∞—á–∞–ª–∞ (earliest)
consumer.seek({ topic: 'orders', partition: 0, offset: 0 });

// –ò–ª–∏ —á–∏—Ç–∞—Ç—å —Å –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è (latest)
consumer.seek({ topic: 'orders', partition: 0, offset: 'latest' });
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ö–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ —Ç–æ—á–∫–æ–π —á—Ç–µ–Ω–∏—è
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–µ—Ä–µ—á–∏—Ç–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è
- –ì–∏–±–∫–æ—Å—Ç—å –≤ –æ–±—Ä–∞–±–æ—Ç–∫–µ

---

## üîç –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –ø—Ä–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏:

- ‚úÖ –¢–æ–ø–∏–∫–∏ —Å–æ–∑–¥–∞–Ω—ã —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –ø–∞—Ä—Ç–∏—Ü–∏–π
- ‚úÖ –†–µ–ø–ª–∏–∫–∞—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ (replication factor)
- ‚úÖ –°–æ–æ–±—â–µ–Ω–∏—è —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º –∫–ª—é—á–æ–º –ø–æ–ø–∞–¥–∞—é—Ç –≤ –æ–¥–Ω—É –ø–∞—Ä—Ç–∏—Ü–∏—é
- ‚úÖ –ü–æ—Ä—è–¥–æ–∫ —Å–æ–æ–±—â–µ–Ω–∏–π –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω –≤ —Ä–∞–º–∫–∞—Ö –ø–∞—Ä—Ç–∏—Ü–∏–∏
- ‚úÖ Offset –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ Failover —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∏ –ø–∞–¥–µ–Ω–∏–∏ –±—Ä–æ–∫–µ—Ä–∞

---

[‚Üê –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—é —Ä–∞–∑–¥–µ–ª–∞](./README.md)
