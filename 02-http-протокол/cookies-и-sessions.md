# üç™ Cookies –∏ Sessions

> –ú–µ—Ö–∞–Ω–∏–∑–º—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è.

---

## üîç COOKIES - –¥–∞–Ω–Ω—ã–µ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ

**–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ:** –ù–µ–±–æ–ª—å—à–∏–µ –¥–∞–Ω–Ω—ã–µ, —Ö—Ä–∞–Ω—è—â–∏–µ—Å—è –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –∫–ª–∏–µ–Ω—Ç–∞ (–≤ –±—Ä–∞—É–∑–µ—Ä–µ).

**–ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã:** –°–µ—Ä–≤–µ—Ä —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∫—É–∫—É, –±—Ä–∞—É–∑–µ—Ä —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ.

---

## üìù –ö–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç Cookies:

### –°–µ—Ä–≤–µ—Ä —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç:

```http
HTTP/1.1 200 OK
Set-Cookie: session_id=abc123; HttpOnly; Secure; Max-Age=3600
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ë—Ä–∞—É–∑–µ—Ä —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∫—É–∫—É `session_id=abc123`.

---

### –ë—Ä–∞—É–∑–µ—Ä –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç:

```http
GET /api/users HTTP/1.1
Host: api.example.com
Cookie: session_id=abc123
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ë—Ä–∞—É–∑–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –∫—É–∫–∏ –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ.

---

## ‚öôÔ∏è –ê—Ç—Ä–∏–±—É—Ç—ã Cookies:

### Domain

**–û–ø–∏—Å–∞–Ω–∏–µ:** –î–ª—è –∫–∞–∫–∏—Ö –¥–æ–º–µ–Ω–æ–≤ –∫—É–∫–∞ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–∞.

**–ü—Ä–∏–º–µ—Ä—ã:**
```http
Set-Cookie: session_id=abc123; Domain=.example.com
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- `.example.com` ‚Äî –¥–ª—è –≤—Å–µ—Ö –ø–æ–¥–¥–æ–º–µ–Ω–æ–≤ (api.example.com, www.example.com)
- `example.com` ‚Äî —Ç–æ–ª—å–∫–æ –¥–ª—è —Ç–æ—á–Ω–æ–≥–æ –¥–æ–º–µ–Ω–∞
- –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é ‚Äî —Ç–æ–ª—å–∫–æ –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ –¥–æ–º–µ–Ω–∞

---

### Path

**–û–ø–∏—Å–∞–Ω–∏–µ:** –î–ª—è –∫–∞–∫–∏—Ö –ø—É—Ç–µ–π –∫—É–∫–∞ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–∞.

**–ü—Ä–∏–º–µ—Ä—ã:**
```http
Set-Cookie: session_id=abc123; Path=/
Set-Cookie: admin_token=xyz; Path=/admin
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- `/` ‚Äî –¥–ª—è –≤—Å–µ—Ö –ø—É—Ç–µ–π –Ω–∞ –¥–æ–º–µ–Ω–µ
- `/admin` ‚Äî —Ç–æ–ª—å–∫–æ –¥–ª—è –ø—É—Ç–µ–π, –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö—Å—è —Å `/admin`
- –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é ‚Äî —Ç–µ–∫—É—â–∏–π –ø—É—Ç—å

---

### Max-Age

**–û–ø–∏—Å–∞–Ω–∏–µ:** –í—Ä–µ–º—è –∂–∏–∑–Ω–∏ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö.

**–ü—Ä–∏–º–µ—Ä—ã:**
```http
Set-Cookie: session_id=abc123; Max-Age=3600  # 1 —á–∞—Å
Set-Cookie: theme=dark; Max-Age=31536000      # 1 –≥–æ–¥
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –í—Ä–µ–º—è –∂–∏–∑–Ω–∏ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
- –ü–æ—Å–ª–µ –∏—Å—Ç–µ—á–µ–Ω–∏—è –∫—É–∫–∞ —É–¥–∞–ª—è–µ—Ç—Å—è
- –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: `Expires` (–¥–∞—Ç–∞ –∏—Å—Ç–µ—á–µ–Ω–∏—è)

---

### Secure

**–û–ø–∏—Å–∞–Ω–∏–µ:** –¢–æ–ª—å–∫–æ HTTPS.

**–ü—Ä–∏–º–µ—Ä:**
```http
Set-Cookie: session_id=abc123; Secure
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- ‚úÖ –ö—É–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ HTTPS
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç –ø–µ—Ä–µ—Ö–≤–∞—Ç–∞ –≤ –æ—Ç–∫—Ä—ã—Ç—ã—Ö —Å–µ—Ç—è—Ö
- ‚úÖ –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

---

### HttpOnly

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ù–µ–¥–æ—Å—Ç—É–ø–Ω–∞ –∏–∑ JavaScript.

**–ü—Ä–∏–º–µ—Ä:**
```http
Set-Cookie: session_id=abc123; HttpOnly
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç XSS –∞—Ç–∞–∫
- ‚úÖ JavaScript –Ω–µ –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –∫—É–∫–µ
- ‚úÖ –¢–æ–ª—å–∫–æ HTTP –∑–∞–ø—Ä–æ—Å—ã –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫—É–∫—É
- ‚úÖ –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è session cookies

---

### SameSite

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ó–∞—â–∏—Ç–∞ –æ—Ç CSRF.

**–ó–Ω–∞—á–µ–Ω–∏—è:**
- `Strict` ‚Äî –∫—É–∫–∞ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ –∫—Ä–æ—Å—Å-—Å–∞–π—Ç–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–∞—Ö
- `Lax` ‚Äî –∫—É–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ (GET)
- `None` ‚Äî –∫—É–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤—Å–µ–≥–¥–∞ (—Ç—Ä–µ–±—É–µ—Ç Secure)

**–ü—Ä–∏–º–µ—Ä—ã:**
```http
Set-Cookie: session_id=abc123; SameSite=Strict
Set-Cookie: session_id=abc123; SameSite=Lax
Set-Cookie: session_id=abc123; SameSite=None; Secure
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç CSRF –∞—Ç–∞–∫
- ‚úÖ –ö–æ–Ω—Ç—Ä–æ–ª—å –æ—Ç–ø—Ä–∞–≤–∫–∏ –∫—É–∫–∏ –≤ –∫—Ä–æ—Å—Å-–¥–æ–º–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–∞—Ö

---

## üîç SESSION - –¥–∞–Ω–Ω—ã–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

**–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ:** –î–∞–Ω–Ω—ã–µ, —Ö—Ä–∞–Ω—è—â–∏–µ—Å—è –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ —Å–µ—Ä–≤–µ—Ä–∞, –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä—É–µ–º—ã–µ –ø–æ session_id.

**–ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã:** –°–µ—Ä–≤–µ—Ä —Å–æ–∑–¥–∞–µ—Ç —Å–µ—Å—Å–∏—é –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç session_id –≤ –∫—É–∫–µ, –∫–ª–∏–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç session_id –æ–±—Ä–∞—Ç–Ω–æ.

---

## üìù –ö–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç Sessions:

### 1. –ö–ª–∏–µ–Ω—Ç –ª–æ–≥–∏–Ω–∏—Ç—Å—è ‚Üí –°–µ—Ä–≤–µ—Ä —Å–æ–∑–¥–∞–µ—Ç —Å–µ—Å—Å–∏—é

**–ó–∞–ø—Ä–æ—Å:**
```http
POST /api/login HTTP/1.1
Content-Type: application/json

{
  "username": "john",
  "password": "password123"
}
```

**–°–µ—Ä–≤–µ—Ä:**
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- –°–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—É—é —Å–µ—Å—Å–∏—é
- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π session_id

---

### 2. –°–µ—Ä–≤–µ—Ä –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç: Set-Cookie: session_id=abc123

**–û—Ç–≤–µ—Ç:**
```http
HTTP/1.1 200 OK
Set-Cookie: session_id=abc123; HttpOnly; Secure; SameSite=Strict; Max-Age=3600
Content-Type: application/json

{
  "success": true,
  "user": {
    "id": 1,
    "username": "john"
  }
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ë—Ä–∞—É–∑–µ—Ä —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∫—É–∫—É `session_id=abc123`.

---

### 3. –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ: sessions["abc123"] = {user_id: 1, username: "john"}

**–•—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:**
```javascript
sessions = {
  "abc123": {
    user_id: 1,
    username: "john",
    created_at: "2024-01-15T10:30:00Z",
    expires_at: "2024-01-15T11:30:00Z"
  }
}
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –î–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- Session_id ‚Äî –∫–ª—é—á –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º
- –ú–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –ª—é–±—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

---

### 4. –ö–ª–∏–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç: Cookie: session_id=abc123

**–ó–∞–ø—Ä–æ—Å:**
```http
GET /api/users/me HTTP/1.1
Host: api.example.com
Cookie: session_id=abc123
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ë—Ä–∞—É–∑–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—É—é –∫—É–∫—É.

---

### 5. –°–µ—Ä–≤–µ—Ä –Ω–∞—Ö–æ–¥–∏—Ç —Å–µ—Å—Å–∏—é –∏ –∑–Ω–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:**
```javascript
// –°–µ—Ä–≤–µ—Ä –ø–æ–ª—É—á–∞–µ—Ç session_id –∏–∑ Cookie –∑–∞–≥–æ–ª–æ–≤–∫–∞
session_id = request.headers.cookie.session_id  // "abc123"

// –ù–∞—Ö–æ–¥–∏—Ç —Å–µ—Å—Å–∏—é –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
session = sessions[session_id]

// –ò–∑–≤–ª–µ–∫–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
user_id = session.user_id  // 1
username = session.username  // "john"

// –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
return {id: user_id, username: username}
```

**–û—Ç–≤–µ—Ç:**
```http
HTTP/1.1 200 OK
Content-Type: application/json

{
  "id": 1,
  "username": "john"
}
```

---

## üí° –ö–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã

> **üìå –ó–∞–ø–æ–º–Ω–∏—Ç–µ:**

- **Cookie - –¥–∞–Ω–Ω—ã–µ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ** ‚Äî —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –±—Ä–∞—É–∑–µ—Ä–µ, –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- **Session - –¥–∞–Ω–Ω—ã–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ** ‚Äî —Ö—Ä–∞–Ω—è—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ, –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä—É—é—Ç—Å—è –ø–æ session_id
- **HttpOnly –∑–∞—â–∏—â–∞–µ—Ç –æ—Ç XSS** ‚Äî JavaScript –Ω–µ –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –∫—É–∫–µ
- **Secure - —Ç–æ–ª—å–∫–æ –¥–ª—è HTTPS** ‚Äî –∫—É–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ –∑–∞—â–∏—â–µ–Ω–Ω–æ–º—É —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—é

---

## üîÑ –°—Ä–∞–≤–Ω–µ–Ω–∏–µ Cookies –∏ Sessions:

| –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ | Cookies | Sessions |
|----------------|---------|----------|
| **–•—Ä–∞–Ω–µ–Ω–∏–µ** | –ù–∞ –∫–ª–∏–µ–Ω—Ç–µ (–±—Ä–∞—É–∑–µ—Ä) | –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ |
| **–†–∞–∑–º–µ—Ä** | –û–≥—Ä–∞–Ω–∏—á–µ–Ω (~4KB) | –ù–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω |
| **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** | –ú–æ–∂–µ—Ç –±—ã—Ç—å —É–∫—Ä–∞–¥–µ–Ω–∞ | –ë–µ–∑–æ–ø–∞—Å–Ω–µ–µ |
| **–î–∞–Ω–Ω—ã–µ** | –¢–æ–ª—å–∫–æ session_id | –õ—é–±—ã–µ –¥–∞–Ω–Ω—ã–µ |
| **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** | –ë—ã—Å—Ç—Ä–µ–µ (–Ω–µ—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –ë–î) | –ú–µ–¥–ª–µ–Ω–Ω–µ–µ (–∑–∞–ø—Ä–æ—Å—ã –∫ —Ö—Ä–∞–Ω–∏–ª–∏—â—É) |

---

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:

### ‚ö†Ô∏è –†–∏—Å–∫–∏ Cookies:

- **XSS –∞—Ç–∞–∫–∏** ‚Äî JavaScript –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –∫—É–∫–∞–º
- **CSRF –∞—Ç–∞–∫–∏** ‚Äî –∫—É–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- **–ü–µ—Ä–µ—Ö–≤–∞—Ç** ‚Äî –∫—É–∫–∏ –º–æ–≥—É—Ç –±—ã—Ç—å –ø–µ—Ä–µ—Ö–≤–∞—á–µ–Ω—ã –≤ –æ—Ç–∫—Ä—ã—Ç—ã—Ö —Å–µ—Ç—è—Ö
- **–ö—Ä–∞–∂–∞** ‚Äî –∫—É–∫–∏ –º–æ–≥—É—Ç –±—ã—Ç—å —É–∫—Ä–∞–¥–µ–Ω—ã

### ‚úÖ –ó–∞—â–∏—Ç–∞:

- **HttpOnly** ‚Äî –∑–∞—â–∏—Ç–∞ –æ—Ç XSS
- **Secure** ‚Äî —Ç–æ–ª—å–∫–æ HTTPS
- **SameSite** ‚Äî –∑–∞—â–∏—Ç–∞ –æ—Ç CSRF
- **–ö–æ—Ä–æ—Ç–∫–æ–µ –≤—Ä–µ–º—è –∂–∏–∑–Ω–∏** ‚Äî –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ Max-Age
- **–•—Ä–∞–Ω–µ–Ω–∏–µ session_id, –∞ –Ω–µ –¥–∞–Ω–Ω—ã—Ö** ‚Äî –¥–∞–Ω–Ω—ã–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

---

## üìä –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:

### –ü—Ä–∏–º–µ—Ä 1: –ü—Ä–æ—Å—Ç–∞—è –∫—É–∫–∞ (–Ω–∞—Å—Ç—Ä–æ–π–∫–∏)

**–£—Å—Ç–∞–Ω–æ–≤–∫–∞:**
```http
HTTP/1.1 200 OK
Set-Cookie: theme=dark; Max-Age=31536000; Path=/
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```http
GET /api/settings HTTP/1.1
Cookie: theme=dark
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–µ–º—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ.

---

### –ü—Ä–∏–º–µ—Ä 2: Session cookie (–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è)

**–£—Å—Ç–∞–Ω–æ–≤–∫–∞:**
```http
HTTP/1.1 200 OK
Set-Cookie: session_id=abc123; HttpOnly; Secure; SameSite=Strict; Max-Age=3600
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```http
GET /api/users/me HTTP/1.1
Cookie: session_id=abc123
```

**–°–µ—Ä–≤–µ—Ä:**
```javascript
session = sessions["abc123"]
user = getUserById(session.user_id)
return user
```

---

### –ü—Ä–∏–º–µ—Ä 3: –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∫—É–∫–∏

**–£—Å—Ç–∞–Ω–æ–≤–∫–∞:**
```http
HTTP/1.1 200 OK
Set-Cookie: session_id=abc123; HttpOnly; Secure
Set-Cookie: theme=dark; Max-Age=31536000
Set-Cookie: lang=ru; Max-Age=31536000
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```http
GET /api/users HTTP/1.1
Cookie: session_id=abc123; theme=dark; lang=ru
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Cookies –∏ Sessions:

### –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å:

- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫—É–∫–∏ —á–µ—Ä–µ–∑ Set-Cookie
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –∫—É–∫–∏ –≤ –∑–∞–ø—Ä–æ—Å–∞—Ö
- ‚úÖ –†–∞–±–æ—Ç–∞ –∞—Ç—Ä–∏–±—É—Ç–æ–≤ (HttpOnly, Secure, SameSite)
- ‚úÖ –í—Ä–µ–º—è –∂–∏–∑–Ω–∏ –∫—É–∫–∏ (Max-Age)
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –∏ —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–µ—Å—Å–∏–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- ‚úÖ –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ session_id
- ‚úÖ –ò—Å—Ç–µ—á–µ–Ω–∏–µ —Å–µ—Å—Å–∏–∏
- ‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ –∫—É–∫–∏ –ø–æ—Å–ª–µ –∏—Å—Ç–µ—á–µ–Ω–∏—è
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç XSS (HttpOnly)
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç CSRF (SameSite)

---

## üìã Best Practices:

### ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ HttpOnly** ‚Äî –¥–ª—è –≤—Å–µ—Ö session cookies
2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Secure** ‚Äî –¥–ª—è –≤—Å–µ—Ö —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –∫—É–∫
3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ SameSite** ‚Äî –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç CSRF
4. **–û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–π—Ç–µ –≤—Ä–µ–º—è –∂–∏–∑–Ω–∏** ‚Äî –∫–æ—Ä–æ—Ç–∫–∏–π Max-Age –¥–ª—è session cookies
5. **–•—Ä–∞–Ω–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ** ‚Äî —Ç–æ–ª—å–∫–æ session_id –≤ –∫—É–∫–µ
6. **–ì–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ session_id** ‚Äî —Å–ª—É—á–∞–π–Ω—ã–µ –∏ —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ
7. **–†–µ–≥—É–ª—è—Ä–Ω–æ –æ—á–∏—â–∞–π—Ç–µ —Å–µ—Å—Å–∏–∏** ‚Äî —É–¥–∞–ª—è–π—Ç–µ –∏—Å—Ç–µ–∫—à–∏–µ —Å–µ—Å—Å–∏–∏

---

## üîÑ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏—è–º–∏:

### –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Å—Å–∏–∏:

```javascript
// –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ session_id
session_id = generateSecureRandomId()

// –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Å—Å–∏–∏
sessions[session_id] = {
  user_id: user.id,
  username: user.username,
  created_at: now(),
  expires_at: now() + 3600  // 1 —á–∞—Å
}

// –û—Ç–ø—Ä–∞–≤–∫–∞ –∫—É–∫–∏ –∫–ª–∏–µ–Ω—Ç—É
response.setCookie('session_id', session_id, {
  HttpOnly: true,
  Secure: true,
  SameSite: 'Strict',
  MaxAge: 3600
})
```

---

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Å—Å–∏–∏:

```javascript
// –ü–æ–ª—É—á–µ–Ω–∏–µ session_id –∏–∑ –∫—É–∫–∏
session_id = request.cookies.session_id

// –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è —Å–µ—Å—Å–∏–∏
if (!sessions[session_id]) {
  return 401 Unauthorized
}

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å—Ç–µ—á–µ–Ω–∏—è
if (sessions[session_id].expires_at < now()) {
  delete sessions[session_id]
  return 401 Unauthorized
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Å–µ—Å—Å–∏–∏
user_id = sessions[session_id].user_id
```

---

### –£–¥–∞–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏–∏ (logout):

```javascript
// –£–¥–∞–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
delete sessions[session_id]

// –£–¥–∞–ª–µ–Ω–∏–µ –∫—É–∫–∏ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ
response.setCookie('session_id', '', {
  MaxAge: 0  // –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ
})
```

---

[‚Üê –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—é —Ä–∞–∑–¥–µ–ª–∞](./README.md)
